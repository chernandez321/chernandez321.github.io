<!DOCTYPE html>
<html lang="en-us">

<head><title>
    
    Laboratorio De Uso De Servidores Proxy Web | 
    
    CHL Blog
</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link rel="canonical" href="https://chlorenzo.com/pagina_web/blog/write-ups/htb/m%C3%B3dulos/laboratorio-de-uso-de-servidores-proxy-web/" />
<link rel="icon" type="image/png" href="https://chlorenzo.com/image/favicon.ico">


<meta name="description" content="
    En el presente Laboratorio vamos a estar viendo escenarios donde utilizamos los conocimientos adquiridos en el módulo como modificar la respuesta de las solicitudes, decodificar y codificar, manipular las peticiones, etc.
    "
/>
<meta property="og:description" content="
    En el presente Laboratorio vamos a estar viendo escenarios donde utilizamos los conocimientos adquiridos en el módulo como modificar la respuesta de las solicitudes, decodificar y codificar, manipular las peticiones, etc.
    " 
/>




<meta property="og:title" content="Laboratorio de Uso de servidores Proxy Web" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chlorenzo.com/pagina_web/blog/write-ups/htb/m%C3%B3dulos/laboratorio-de-uso-de-servidores-proxy-web/" /><meta property="article:section" content="pagina_web" />
<meta property="article:published_time" content="2025-08-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-08-10T00:00:00+00:00" />





  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Laboratorio de Uso de servidores Proxy Web">
  <meta name="twitter:description" content="En el presente Laboratorio vamos a estar viendo escenarios donde utilizamos los conocimientos adquiridos en el módulo como modificar la respuesta de las solicitudes, decodificar y codificar, manipular las peticiones, etc.">


  <meta itemprop="name" content="Laboratorio de Uso de servidores Proxy Web">
  <meta itemprop="description" content="En el presente Laboratorio vamos a estar viendo escenarios donde utilizamos los conocimientos adquiridos en el módulo como modificar la respuesta de las solicitudes, decodificar y codificar, manipular las peticiones, etc.">
  <meta itemprop="datePublished" content="2025-08-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-08-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="502">
  <meta itemprop="keywords" content="Hackthebox,Proxy">




<link rel="stylesheet" href="https://chlorenzo.com/main.min.css">





<script src="https://chlorenzo.com/bundle.js"></script>







<script data-ad-client="adsense-key" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>




    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4G9W14SLG4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4G9W14SLG4');
</script>






</head>

<body><header id="header">
  <div class="top-bar">
    <div class="container-md">

      <div class="row align-items-center">
        <div class="col-3 col-sm-4 social-buttons d-none d-sm-block">
          <ul>
    
    

    
    <li>
        <a href="https://www.youtube.com/@CHL_Hands_On" target="_blank">
            <i class="fab fa-youtube"></i></a>
    </li>
    

    
    <li>
        <a href="https://www.instagram.com/19chl96/" target="_blank">
            <i class="fab fa-instagram"></i></a>
    </li>
    

    
    <li>
        <a href="https://github.com/chernadez321" target="_blank">
            <i class="fab fa-github"></i></a>
    </li>
    

    

    
    <li>
        <a href="https://www.linkedin.com/in/chlinked/" target="_blank">
            <i class="fab fa-linkedin"></i></a>
    </li>
    

</ul>
        </div>

        <div class="ra-toggler col-3 col-sm-4 d-block d-sm-none">
          <button class="bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <div class="col-6 col-sm-4">
          <h2 class="title"><a href="https://chlorenzo.com/">CHL Blog</a></h2>
        </div>

        
        <div class="col-3 col-sm-4">
          <div class="col col-md-8 offset-md-4 d-none d-sm-block">
            <form id="cse-search-box-form-id" class="input-group search-bar" onsubmit="return executeQuery('lg');"
              role="search">
              <input id="cse-search-input-box-id" type="text" class="form-control" placeholder="Search">
              <button class="btn" type="submit">
                <i class="fa fa-search"></i>
              </button>
            </form>
          </div>
        </div>
        

      </div>
    </div>
  </div>

  <div class="container-md">
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark sticky-top">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">

          <li class="nav-item d-block d-sm-none">
            <ul class="social-buttons">
              <ul>
    
    

    
    <li>
        <a href="https://www.youtube.com/@CHL_Hands_On" target="_blank">
            <i class="fab fa-youtube"></i></a>
    </li>
    

    
    <li>
        <a href="https://www.instagram.com/19chl96/" target="_blank">
            <i class="fab fa-instagram"></i></a>
    </li>
    

    
    <li>
        <a href="https://github.com/chernadez321" target="_blank">
            <i class="fab fa-github"></i></a>
    </li>
    

    

    
    <li>
        <a href="https://www.linkedin.com/in/chlinked/" target="_blank">
            <i class="fab fa-linkedin"></i></a>
    </li>
    

</ul>
            </ul>
          </li>

          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chlorenzo.com/">
              Home
            </a>
          </li>
          
          
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
              Blog
            </a>
            <div class="dropdown-menu">
              
              
                <a class="dropdown-item" href="https://chlorenzo.com/pagina_web/blog/seguridad_para_todos/">Seguridad para todos</a>
              
              
              
                <a class="dropdown-item" href="https://chlorenzo.com/pagina_web/blog/write-ups/">Write-ups</a>
              
              
              
                <div class="dropdown-divider"></div>
              
              
              
                <a class="dropdown-item" href="https://chlorenzo.com/tags/">Búsqueda por etiquetas</a>
              
              
            </div>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chlorenzo.com/pagina_web/trayectoria/">
              Trayectoria
            </a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chlorenzo.com/pagina_web/contact/">
              Contacto
            </a>
          </li>
          
          
        </ul>

        
        <form id="cse-search-box-form-id2" class="d-flex search-bar d-block d-sm-none"
          onsubmit="return executeQuery('xs');" role="search">
          <input id="cse-search-input-box-id2" type="text" class="form-control" placeholder="Search">
          <button class="btn" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </form>
        

      </div>
    </nav>
  </div>
</header>

<main class="blog-content">
    <div class="container-md">
        <div class="row">
            
            <div class="col-lg-2 d-none d-xl-block">
                <div class="ad-left-offset"></div>
                
            </div>

            <div class="col-md-12 col-lg-8 px-lg-4">
                

                <h1 class="title">Laboratorio de Uso de servidores Proxy Web</h1>

                <div class="container-fluid px-0 mb-4">
                    <div class="row align-items-end">
                        <div class="col-md-4 date-time">
                            <span class="date">
    Aug 10, 2025
</span>
                            &centerdot;
                            <span class="time-to-read">
    3 mins read</span>
                        </div>

                        <div class="col-md-8 tags ">
                            
                            <a href="https://chlorenzo.com/tags/hackthebox"><span
                                    class="tag bg-dark">hackthebox</span></a>
                            
                            <a href="https://chlorenzo.com/tags/proxy"><span
                                    class="tag bg-dark">proxy</span></a>
                            
                        </div>
                    </div>
                </div>

                

                <p><img src="../../../../../images/Miniaturas/burpsuite.png" alt=""></p>
<h4 id="enunciado">Enunciado</h4>
<p>Estamos realizando pruebas de penetración internas para una empresa local. Al explorar sus aplicaciones web internas, se le presentan diferentes situaciones en las que Burp/ZAP podría ser útil. Lea cada escenario en las preguntas a continuación y determine las características más útiles en cada caso. Luego, utilícelas para alcanzar el objetivo especificado.</p>
<p><strong>La página /lucky.php tiene un botón que parece estar deshabilitado. Intenta habilitarlo y haz clic en él para obtener la bandera.</strong>
Visitamos la página que nos dicen (http://IP:Puerto/lucky.php) y tenemos esto:</p>
<p><img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_1-1.png" alt="">
En el código nos fijamos que tenemos un botón con propiedad <code>disabled</code> que es el que queremos activar.
Básicamente vamos a interceptar la petición, hacemos click derecho:
<em>Seleccionamos (Do Intercept)</em> -&gt; <em>Seleccionamos (Response to this request)</em> -&gt; Seleccionamos (<em>Foward</em>) Para que nos muestre la respuesta para poderla Editar.
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_1-2.png" alt="">
Borramos la propiedad <code>disabled</code> y damos <code>Foward</code>.
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_1-3.png" alt="">
Luego hacemos click en el botón que es la petición <code>POST</code>, la interceptamos y hacemos lo mismo que con el <code>GET</code> anterior:
<em>Seleccionamos (Do Intercept)</em> -&gt; <em>Seleccionamos (Response to this request)</em> -&gt; Seleccionamos (<em>Foward</em>)
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_1-4.png" alt="">
Y muy probablemente debamos repetirlo varias veces, hasta que aparece la flag.
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_1-6.png" alt=""></p>
<p><strong>La página /admin.php usa una cookie codificada varias veces. Intente decodificarla hasta obtener un valor de 31 caracteres. Envíe el valor como respuesta.</strong>
Visitamos la url que nos dicen y vemos efectivamente la cookie:
(http://IP:Puerto/admin.php)
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_2-1.png" alt="">
Decodificamos la cookie:
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_2-2.png" alt="">
Como resultado tenemos :<code>3dac93b8cd250aa8c1a36fffc79a17a</code></p>
<p><strong>Una vez decodificada la cookie, notará que solo tiene 31 caracteres, lo que parece ser un hash MD5 al que le falta el último. Por lo tanto, intente fuzzear el último carácter de la cookie MD5 decodificada con caracteres alfanuméricos, mientras codifica cada solicitud con los métodos de codificación que identificó anteriormente. (Puede usar la lista de palabras &ldquo;alphanum-case.txt&rdquo; de Seclist para la carga útil).</strong>
La idea es la siguiente interceptamos una petición al (http://IP:Puertt/admin.php)
Editamos el campo de la cookie de forma tal que</p>
<ol>
<li>Añadimos como prefijo con el valor de la pregunta anterior.</li>
<li>Hacemos encode con Base64</li>
<li>Hacemos encode con Hexadecimal
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_3-1.png" alt="">
Le damos a empezar el ataque y vemos que hay peticiones donde la respuesta tiene una longitud diferente.
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_3-2.png" alt="">
Seleccionamos una, vamos a la respuesta y vemos la flag al final.
<img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_3-3.png" alt=""></li>
</ol>
<p><strong>Estás usando la herramienta &lsquo;auxiliary/scanner/http/coldfusion_locale_traversal&rsquo; de Metasploit, pero no funciona correctamente. Decides capturar la solicitud enviada por Metasploit para verificarla manualmente y repetirla. Una vez capturada la solicitud, ¿a qué directorio se llama &lsquo;XXXXX&rsquo; en &lsquo;/XXXXX/administrator/..&rsquo;?</strong>
Vamos a abrir el Metasploit y vamos a usar el módulo que nos indican en la pregunta,
luego vamos a especificar con la IP, el puerto y el proxy, vamos además abrir el Burpuite para que escuche por su puerto por defecto :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>msfconsole
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>msf6&gt; use auxiliary/scanner/http/coldfusion_locale_traversal
</span></span><span style="display:flex;"><span>msf6&gt; set rhost &lt;IP&gt;
</span></span><span style="display:flex;"><span>msf6&gt; set rport &lt;Puerto&gt;
</span></span><span style="display:flex;"><span>msf6&gt; proxies http:127.0.0.1:8080
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>msf6&gt; run
</span></span></code></pre></div><p><img src="../../../../../images/HTB_modulos/Proxys_Webs/flag_4-1.png" alt="">
Le damos <code>RUN</code> y vemos que vamos a interceptar la petición donde nos aparece la ruta indicada.</p>
<p>Si te sirvió de algo este tutorial ya para mi es más que suficiente, si me puedes decir en que podemos mejorar te lo voy a agradecer un montón.</p>


                <div id="social-media-share">
	<p><i>Escríbeme por cualquiera de las vías</i></p>
	
	<div class="share-buttons">
	    
		<a href="https://www.instagram.com/19chl96/" 
   			target="_blank" 
   			title="Sígueme en Instagram">
    		<img src=https://chlorenzo.com/icons/45px/instagram.png alt="Instagram">
		</a>

		<a  href="https://www.linkedin.com/in/chlinked/"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on LinkedIn. Opens in a new window." >
	        <img src=https://chlorenzo.com/icons/48px/linkedin.png>
	    </a>

	    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=chlorenzo96@gmail.com&su=Para Carlos&body=Hola." 
   		   target="_blank" 
   		   title="Enviar correo usando Gmail">
    	<img src=https://chlorenzo.com/icons/48px/email.png alt="Email">
		</a>

		

	</div>
</div>



                
                <br>
                <div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = '';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>

            <div class="col-lg-2 d-none d-xl-block">
                <div class="ad-right-offset"></div>
                
            </div>
        </div>
    </div>
</main>

<footer class="bg-dark text-light py-4">
    <div class="container-md">
        <div class="row justify-content-center">
            <div class="col-12">
                <nav class="navbar navbar-expand-sm navbar-dark bg-dark justify-content-center">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="https://chlorenzo.com/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://chlorenzo.com/pagina_web/blog/seguridad_para_todos/">Seguridad para todos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://chlorenzo.com/pagina_web/blog/write-ups/">Write-ups</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <p>© 2025 Carlos Hernández Lorenzo</p>
    </div>
</footer>


<script async src="https://cse.google.com/cse.js?cx=google-cse-key"></script>
<gcse:searchresults-only></gcse:searchresults-only>

</body>

</html>