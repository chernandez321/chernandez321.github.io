<!DOCTYPE html>
<html lang="en-us">

<head><title>
    
    Bandit Nivel 22-&gt;23 | 
    
    CHL Blog
</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link rel="canonical" href="https://chernandez321.github.io/pagina_web/blog/sections/over-the-wire/bandit/bandit-nivel-22/" />
<link rel="icon" type="image/png" href="https://chernandez321.github.io/image/favicon.ico">


<meta name="description" content="
    Repasamos las tareas cron que se están ejecutando
    "
/>
<meta property="og:description" content="
    Repasamos las tareas cron que se están ejecutando
    " 
/>




<meta property="og:title" content="Bandit Nivel 22-&gt;23" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chernandez321.github.io/pagina_web/blog/sections/over-the-wire/bandit/bandit-nivel-22/" /><meta property="article:section" content="pagina_web" />
<meta property="article:published_time" content="2024-11-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-11-08T00:00:00+00:00" />





  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Bandit Nivel 22-&gt;23">
  <meta name="twitter:description" content="Repasamos las tareas cron que se están ejecutando">


  <meta itemprop="name" content="Bandit Nivel 22-&gt;23">
  <meta itemprop="description" content="Repasamos las tareas cron que se están ejecutando">
  <meta itemprop="datePublished" content="2024-11-08T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-11-08T00:00:00+00:00">
  <meta itemprop="wordCount" content="350">
  <meta itemprop="keywords" content="Bash,OverTheWire,Tareas Cron">




<link rel="stylesheet" href="https://chernandez321.github.io/main.min.css">





<script src="https://chernandez321.github.io/bundle.js"></script>







<script data-ad-client="adsense-key" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>




    <script async src="https://www.googletagmanager.com/gtag/js?id=G-A1B2C3D4E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-A1B2C3D4E5');
</script>






</head>

<body><header id="header">
  <div class="top-bar">
    <div class="container-md">

      <div class="row align-items-center">
        <div class="col-3 col-sm-4 social-buttons d-none d-sm-block">
          <ul>
    
    

    
    <li>
        <a href="https://www.youtube.com/@CHL_Hands_On" target="_blank">
            <i class="fab fa-youtube"></i></a>
    </li>
    

    
    <li>
        <a href="https://www.instagram.com/19chl96/" target="_blank">
            <i class="fab fa-instagram"></i></a>
    </li>
    

    
    <li>
        <a href="https://github.com/chernadez321" target="_blank">
            <i class="fab fa-github"></i></a>
    </li>
    

    

    
    <li>
        <a href="https://www.linkedin.com/in/chlinked/" target="_blank">
            <i class="fab fa-linkedin"></i></a>
    </li>
    

</ul>
        </div>

        <div class="ra-toggler col-3 col-sm-4 d-block d-sm-none">
          <button class="bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <div class="col-6 col-sm-4">
          <h2 class="title"><a href="https://chernandez321.github.io/">CHL Blog</a></h2>
        </div>

        
        <div class="col-3 col-sm-4">
          <div class="col col-md-8 offset-md-4 d-none d-sm-block">
            <form id="cse-search-box-form-id" class="input-group search-bar" onsubmit="return executeQuery('lg');"
              role="search">
              <input id="cse-search-input-box-id" type="text" class="form-control" placeholder="Search">
              <button class="btn" type="submit">
                <i class="fa fa-search"></i>
              </button>
            </form>
          </div>
        </div>
        

      </div>
    </div>
  </div>

  <div class="container-md">
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark sticky-top">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">

          <li class="nav-item d-block d-sm-none">
            <ul class="social-buttons">
              <ul>
    
    

    
    <li>
        <a href="https://www.youtube.com/@CHL_Hands_On" target="_blank">
            <i class="fab fa-youtube"></i></a>
    </li>
    

    
    <li>
        <a href="https://www.instagram.com/19chl96/" target="_blank">
            <i class="fab fa-instagram"></i></a>
    </li>
    

    
    <li>
        <a href="https://github.com/chernadez321" target="_blank">
            <i class="fab fa-github"></i></a>
    </li>
    

    

    
    <li>
        <a href="https://www.linkedin.com/in/chlinked/" target="_blank">
            <i class="fab fa-linkedin"></i></a>
    </li>
    

</ul>
            </ul>
          </li>

          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chernandez321.github.io/">
              Home
            </a>
          </li>
          
          
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
              Blog
            </a>
            <div class="dropdown-menu">
              
              
                <a class="dropdown-item" href="https://chernandez321.github.io/pagina_web/blog/posts/">Posts</a>
              
              
              
                <a class="dropdown-item" href="https://chernandez321.github.io/pagina_web/blog/sections/">Secciones</a>
              
              
              
                <div class="dropdown-divider"></div>
              
              
              
                <a class="dropdown-item" href="https://chernandez321.github.io/tags/">Tags</a>
              
              
            </div>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chernandez321.github.io/pagina_web/trayectoria/">
              Trayectoria
            </a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link 
              
              " 
              href="https://chernandez321.github.io/pagina_web/contact/">
              Contacto
            </a>
          </li>
          
          
        </ul>

        
        <form id="cse-search-box-form-id2" class="d-flex search-bar d-block d-sm-none"
          onsubmit="return executeQuery('xs');" role="search">
          <input id="cse-search-input-box-id2" type="text" class="form-control" placeholder="Search">
          <button class="btn" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </form>
        

      </div>
    </nav>
  </div>
</header>

<main class="blog-content">
    <div class="container-md">
        <div class="row">
            
            <div class="col-lg-2 d-none d-xl-block">
                <div class="ad-left-offset"></div>
                
            </div>

            <div class="col-md-12 col-lg-8 px-lg-4">
                

                <h1 class="title">Bandit Nivel 22-&gt;23</h1>

                <div class="container-fluid px-0 mb-4">
                    <div class="row align-items-end">
                        <div class="col-md-4 date-time">
                            <span class="date">
    Nov 8, 2024
</span>
                            &centerdot;
                            <span class="time-to-read">
    2 mins read</span>
                        </div>

                        <div class="col-md-8 tags ">
                            
                            <a href="https://chernandez321.github.io/tags/bash"><span
                                    class="tag bg-dark">Bash</span></a>
                            
                            <a href="https://chernandez321.github.io/tags/overthewire"><span
                                    class="tag bg-dark">OverTheWire</span></a>
                            
                            <a href="https://chernandez321.github.io/tags/tareas-cron"><span
                                    class="tag bg-dark">Tareas Cron</span></a>
                            
                        </div>
                    </div>
                </div>

                

                <p><strong>Objetivo:</strong> Un programa se ejecuta automáticamente a intervalos regulares desde cron, el programador de tareas basado en tiempo. Busque en /etc/cron.d/ la configuración y vea qué comando se está ejecutando.</p>
<p>NOTA: Ver scripts de shell escritos por otras personas es una habilidad muy útil. El script para este nivel está diseñado para que sea fácil de leer. Si tiene problemas para comprender lo que hace, intente ejecutarlo para ver la información de depuración que imprime.</p>
<p>Nos conectamos a  la máquina:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh bandit22@bandit.labs.overthewire.org -p <span style="color:#ae81ff">2220</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Password bandit22</span>
</span></span></code></pre></div><p>Buscamos la trarea cron en la ruta dada:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /etc/cron.d/cronjob_bandit23
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217210930.png" alt=""></p>
<p>Al igual que en el ejercicio anterior se ejecuta un script cada minuto, con lo cual vamos  a ver cual es ese script.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /usr/bin/cronjob_bandit23.sh
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217211212.png" alt=""></p>
<p>Vamos a desglosarlo:
<strong>Nota:  $(comando) - bash interpreta el output del comando ejecutado</strong>
1- Guarda en la variable myname &lsquo;bandit23&rsquo; dado que esta tarea la ejecuta dicho usuario.
2- En $mytarget almacena otro valor que vamos a analizar a continuación</p>
<p>Vamos a ejecutar esta parte del script con nuestro ususario (bandit22) para saber que es lo que devuelve:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo I am user <span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span> 
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217212349.png" alt=""></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo I am user <span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span> | md5sum
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217212506.png" alt="">
Vemos que nos devuelve el valor md5  de la cadena I am user bandit 22.
Con el cut simplemente nos quedamos con el primer argumento</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo I am user <span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span> | md5sum | cut -d <span style="color:#e6db74">&#39; &#39;</span> -f <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>Vamos a seguir analizando, a continuación imprime en pantalla que está copiando el password del usuario que ejecuta la tarea hacia un archivo temporal con nombre del valor md5 correspondiente:
<code>echo &quot;Copying passwordfile /etc/bandit_pass/$myname to /tmp/$mytarget&quot;</code></p>
<p>Vamos a probar a acceder al /tmp/md5sum(para el bandit22):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /tmp/8169b67bd894ddbb4412f91573b38db3
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217213507.png" alt="">
Y efectivamente nos indica el password para entrar del nivel anterior a este nivel.
Con lo cual vamos a hacer lo mismo pero sustituyendo el usuario por bandit23.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo I am user bandit23 | md5sum | cut -d <span style="color:#e6db74">&#39; &#39;</span> -f <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217213754.png" alt="">
Aqui ya obtuvimos el md5sum, ahora intentamos leer el archivo temporal con dicho nombre y vemos que nos da una cadena.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /tmp/8ca319486bfbbc3663ea0fbe81326349
</span></span></code></pre></div><p><img src="../../../../../images/Pasted_image_20241217213850.png" alt="">
Dando la contraseña para el siguiente nivel: 0Zf11ioIjMVN551jX3CmStKLYqjk54Ga</p>


                <div id="social-media-share">
	<p><i>Escríbeme por cualquiera de las vías</i></p>
	
	<div class="share-buttons">
	    
		<a href="https://www.instagram.com/19chl96/" 
   			target="_blank" 
   			title="Sígueme en Instagram">
    		<img src=https://chernandez321.github.io/icons/45px/instagram.png alt="Instagram">
		</a>

		<a  href="https://www.linkedin.com/in/chlinked/"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on LinkedIn. Opens in a new window." >
	        <img src=https://chernandez321.github.io/icons/48px/linkedin.png>
	    </a>

	    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=chlorenzo96@gmail.com&su=Para Carlos&body=Hola." 
   		   target="_blank" 
   		   title="Enviar correo usando Gmail">
    	<img src=https://chernandez321.github.io/icons/48px/email.png alt="Email">
		</a>

		

	</div>
</div>



                
                <br>
                <div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = '';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>

            <div class="col-lg-2 d-none d-xl-block">
                <div class="ad-right-offset"></div>
                
            </div>
        </div>
    </div>
</main>

<footer class="bg-dark text-light py-4">
    <div class="container-md">
        <div class="row justify-content-center">
            <div class="col-12">
                <nav class="navbar navbar-expand-sm navbar-dark bg-dark justify-content-center">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="https://chernandez321.github.io/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://chernandez321.github.io/pagina_web/blog/posts/">Posts</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://chernandez321.github.io/pagina_web/blog/sections/">Secciones</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <p>
            
                © 2024 Carlos Hernández Lorenzo
            
        </p>
    </div>
</footer>


<script async src="https://cse.google.com/cse.js?cx=google-cse-key"></script>
<gcse:searchresults-only></gcse:searchresults-only>

</body>

</html>